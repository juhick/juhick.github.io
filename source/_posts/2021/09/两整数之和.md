---
title: 两整数之和
date: 2021-09-26 08:07:52
tags: 
 - leetcode
 - 位运算
categories:
 - leetcode
math: true
---

[原题链接](https://leetcode-cn.com/problems/sum-of-two-integers/)

# 预备知识

有符号整数通常用补码来表示和存储，补码具有以下特征：

* 正整数的补码与原码相同；负整数的补码为其原码除符号位外的所有位取反后加1。
* 符号位与数值为可以一起参与运算。

<!-- more -->

# 题目分析

因为该题不允许使用$+$和$-$。因此原则上也不应该使用$+=$、$-=$和$sum$等方法，我们可以采取位运算的方法来进行求解。

两个二进制相加时有以下四种情况：
$$
0 + 0 = 0 \\
0 + 1 = 1 \\
1 + 0 = 1 \\
1 + 1 = 0(进位)
$$
因此，对于整数$a$和$b$，有以下两条规律：

* 在不考虑进位的情况下，其**无进位加法结果**为$a \oplus b$。
* 而所有需要进位的的位为$a \& b$，进位后的**进位结果**为$(a \& b) << 1$

于是，我们可以将整数$a$和$b$的和，拆分为$a$和$b$的**无进位加法结果**与**进位结果**的和。

因为每一次拆分都可以让需要进位的最低位至少左移一位，又因为$a$和$b$可以取到负数，所以最多需要$\log(max\_int)$次拆分即可完成运算。

因为有符号整数用补码表示，所以以上算法也可以推广到0和负数。

# 代码实现

```java
class Solution {
    public int getSum(int a, int b) {
        while(b != 0){
            int carry = (a & b) << 1;
            a = a ^ b;
            b = carry;
        }
        return a;
    }
}
```

